<script type="text/javascript">
  var MCPopupTrackers = {
    Category:"UserSignupMailchimpPopup",
    Actions:{ Success: "Success", Error:"Error", FormSubmitted:"FormSubmitted", OnShow:"Displayed", ClosedWithoutSignup:"ClosedWithoutSignup"}
  };

  var MCPopupCustomCallBack = {
      Success:function(msg){
	    T3Core.TrackUserSignUp(MCPopupTrackers.Category, MCPopupTrackers.Actions.Success, msg);
      },
      Error:function(msg){
        T3Core.TrackUserSignUp(MCPopupTrackers.Category, MCPopupTrackers.Actions.Error, msg);
      },
      OnShow:function(){
        T3Core.TrackUserSignUp(MCPopupTrackers.Category, MCPopupTrackers.Actions.OnShow, "");
      },
      OnFormSubmitted:function(){
        T3Core.TrackUserSignUp(MCPopupTrackers.Category, MCPopupTrackers.Actions.FormSubmitted, "");
      },
      ClosedWithoutSignup:function(){
        T3Core.TrackUserSignUp(MCPopupTrackers.Category, MCPopupTrackers.Actions.ClosedWithoutSignup, "");
      }
  };
  
  {% assign first_visit = settings.modal_signup_first %}
  {% assign total_visits = settings.modal_signup_total %}
  var _MC_cookie_name = 'MCEvilPopupClosed';
  var _Visits = [{{ first_visit }}{% for i in (1..total_visits) %}{% capture next_visit %}{{ first_visit | plus: i }}{% endcapture %},{{ next_visit }}{% endfor %}];
  var _PageViewNumber = {{ settings.modal_signup_page_view }};
  var _SessionCookieName = 'SessionCookie';
  var CookieValues = { NotSubmitted : 'NotSubmitted', HasSubmitted : 'HasSubmitted', ShowOnNextVisit: 'ShowOnNextVisit', ErrorInSubmitted: 'ErrorInSubmitted'};
  var _Popup_delay = {{ settings.modal_signup_delay_time }};
  var _ShowPopupOnMobileDevices = {{ settings.show_popup_on_mobile_device }};
  var _ShowPopupOnCurrentPage = false;
  var _MCPopupCustomCallBack = MCPopupCustomCallBack;
  {% unless template == 'cart' or template contains 'customers' %}
    _ShowPopupOnCurrentPage = true;
  {% endunless %}
</script>